<!doctype html>
<html lang="en" ng-app="mediaGalleryApp">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Angular Media Gallery (Simple)</title>
  <!-- AngularJS CDN (1.x) - single-file friendly -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
 <link rel="stylesheet" href="./css/galery.css">
</head>
<body ng-controller="GalleryCtrl as vm">
  <header class="navbar">
    <div class="brand">MyMedia Gallery</div>
    <div class="nav-right">
      <div class="search">
        <input type="search" placeholder="Search media or tags..." ng-model="vm.query" />
      </div>

      <div class="profile">
        <button ng-click="vm.toggleProfile()">{{vm.user.name}} ▾</button>
        <div class="dropdown" ng-class="{show: vm.showProfile}">
          <div style="padding:8px 0">
            <strong>{{vm.user.name}}</strong><br>
            <small>{{vm.user.email}}</small>
          </div>
          <hr/>
          <button ng-click="vm.editProfile()">Edit profile</button>
          <button ng-click="vm.logout()">Logout</button>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="user-card">
      <div class="avatar">{{vm.user.name.charAt(0)}}</div>
      <div>
        <div><strong>{{vm.user.name}}</strong></div>
        <div style="font-size:13px;color:#666">{{vm.user.bio || 'No bio yet'}}</div>
      </div>
    </section>

    <section class="controls">
      <!-- Add by URL -->
      <input type="text" ng-model="vm.newMedia.url" placeholder="Paste image/video URL (http...)" style="min-width:280px" />
      <input type="text" ng-model="vm.newMedia.title" placeholder="Title (optional)" />
      <input type="text" ng-model="vm.newMedia.tags" placeholder="Comma-separated tags" />
      <button ng-click="vm.addByUrl()">Add URL</button>

      <!-- Upload local file (image/video) -->
      <input type="file" id="fileInput" accept="image/*,video/*" onchange="angular.element(this).scope().vm.handleFile(this.files)" />

      <div style="margin-left:auto">Total: <strong>{{vm.media.length}}</strong></div>
    </section>

    <section style="margin-bottom:12px">
      <label>Filter type:</label>
      <select ng-model="vm.filterType">
        <option value="all">All</option>
        <option value="image">Images</option>
        <option value="video">Videos</option>
      </select>
    </section>

    <section>
      <div class="grid">
        <div class="card" ng-repeat="m in vm.media | filter:vm.searchFilter | limitTo:200">
          <div ng-switch="m.type">
            <img ng-switch-when="image" ng-src="{{m.src}}" alt="{{m.title || 'image'}}" ng-click="vm.openModal(m)" />
            <video ng-switch-when="video" ng-src="{{m.src}}" controls ng-click="vm.openModal(m)"></video>
            <div ng-switch-default style="height:140px;display:flex;align-items:center;justify-content:center;color:#999">Preview not available</div>
          </div>
          <div class="meta">
            <div>
              <div style="font-weight:600">{{m.title || (m.type | uppercase)}}</div>
              <div class="tag">{{m.tags.join(', ')}}</div>
            </div>
            <div>
              <button ng-click="vm.toggleFavorite(m)">{{m.favorite ? '★' : '☆'}}</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Modal -->
    <div class="modal-backdrop" ng-if="vm.modalOpen" ng-click="vm.closeModal()">
      <div class="modal-content" ng-click="$event.stopPropagation()">
        <h3>{{vm.modalItem.title || (vm.modalItem.type | uppercase)}}</h3>
        <div style="margin:10px 0">
          <img ng-if="modalIsImage()" ng-src="{{vm.modalItem.src}}" alt="preview" />
          <video ng-if="modalIsVideo()" ng-src="{{vm.modalItem.src}}" controls autoplay></video>
        </div>
        <div style="font-size:13px;color:#444">Tags: {{vm.modalItem.tags.join(', ')}}</div>
        <div style="margin-top:10px;text-align:right"><button ng-click="vm.closeModal()">Close</button></div>
      </div>
    </div>

  </main>

  <script src="./js/galery.js">
    
  </script>
</body>
</html>
